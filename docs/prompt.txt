Excellent. You've identified the core limitations of the previous prompt and are thinking like a true content strategist. Your suggestions are spot-on for scaling this process, improving accuracy, and creating more effective content.

This new prompt incorporates all your feedback. It shifts from a simple tool to a powerful, multi-output content generation system. It's designed to be more "intelligent" by forcing the AI to analyze, segment, and then create, which directly addresses the accuracy issues you mentioned.

---

### **The New, Advanced Prompt**

This prompt uses a "Scene-First" methodology, is designed for creating multiple posts from one video, and incorporates a single, detailed caption format.

<prompt>
    <task>Analyze a video and generate multiple, distinct social media carousel post packages.</task>

    <goal>
    The primary objective is to intelligently segment a single video into multiple, self-contained "Narrative Scenes." For each scene, you will create a complete social media carousel package, including a title, a detailed narrative caption, and a set of precise timestamps for key visual screenshots. This maximizes content output from a single video source.
    </goal>

    <input>
    A video source, specified by a URL or a detailed background summary like the one below:
    `[VIDEO_URL_OR_BACKGROUND]`
    </goal>

    <core_methodology>
    You will perform a two-step analysis before generating any output:

    1.  **Narrative Scene Segmentation:** First, analyze the entire video to identify distinct **Narrative Scenes**. A "Narrative Scene" is a self-contained story segment with a clear beginning, middle, and end, often marked by a change in location, characters, topic, or objective. (e.g., In a rescue video, "The Trap & Initial Problem" is one scene, "The Mechanical Rescue" is a second, and "Medical Treatment & Release" is a third).

    2.  **Keyframe Extraction:** Within **each** identified Narrative Scene, select 4 to 8 visually distinct and narratively significant **Keyframes**. A Keyframe must represent a critical moment: a turning point, a clear action, an emotional peak, or a visually striking shot. **Avoid selecting similar-looking frames from the same continuous action.**
    </core_methodology>

    <rules>
        <rule>**Chain of Thought First:** Before generating the final output, you **must** begin with a brief `[CHAIN_OF_THOUGHT]` section. In it, list the Narrative Scenes you have identified and the number of Keyframes you plan to extract for each. This forces a structured analysis and improves accuracy.</rule>
        <rule>**One Post Per Scene:** Each identified Narrative Scene will be formatted as a complete and separate `[SCENE_PACKAGE_#]`. If you find three scenes, you will produce three packages.</rule>
        <rule>**Create a Scene Title:** Each package must have a short, engaging `Scene_Title` (3-7 words) that acts as a headline for the social media post.</rule>
        <rule>**Write One Detailed, Unified Caption:** For each scene, write a single `Detailed_Caption` (80-150 words). This caption must tell the story of that specific scene. **Crucially, you must explicitly reference the images in order** (e.g., "The first image shows the initial crisis...", "In the following slides, you can see the team...", "The final shot captures...").</rule>
        <rule>**Provide Precise Timestamps:** For each Keyframe, provide a single, precise timestamp in `[HH:MM:SS]` format. This is for screenshot extraction and must be exact.</rule>
        <rule>**Strict Format Adherence:** The final output must follow the template precisely for easy programmatic parsing.</rule>
    </rules>

    <format>
        <template>
[CHAIN_OF_THOUGHT]
I have identified [Number] distinct Narrative Scenes in this video.
- Scene 1: [Brief description of the first scene's topic]. I will select [Number] Keyframes.
- Scene 2: [Brief description of the second scene's topic]. I will select [Number] Keyframes.
- (Continue for all identified scenes)
[/CHAIN_OF_THOUGHT]

---

[SCENE_PACKAGE_1]
**Scene_Title:** [Engaging Title for the First Carousel Post]

**Detailed_Caption:** [A cohesive 80-150 word narrative explaining the story of this scene. It must reference the images in sequence, guiding the viewer through the carousel (e.g., "In the first image...", "As you swipe...", "The next shot reveals...", "Finally, we see...").]

**Keyframe_Timestamps:**
1. [HH:MM:SS]
2. [HH:MM:SS]
3. [HH:MM:SS]
4. [HH:MM:SS]
(Continue for all Keyframes in this scene)
[/SCENE_PACKAGE_1]

---

[SCENE_PACKAGE_2]
**Scene_Title:** [Engaging Title for the Second Carousel Post]

**Detailed_Caption:** [A new 80-150 word narrative for the second scene, following the same rules as above.]

**Keyframe_Timestamps:**
1. [HH:MM:SS]
2. [HH:MM:SS]
3. [HH:MM:SS]
(Continue for all Keyframes in this scene)
[/SCENE_PACKAGE_2]

(The output will continue with a new package for every scene identified)
        </template>
        <output_format>Plain text, following the template above.</output_format>
    </format>
</prompt>

---
### **How This Improved Prompt Solves Your Problems:**

1.  **Multiple Posts from One Video:** The `Narrative Scene Segmentation` and `[SCENE_PACKAGE_#]` structure directly addresses this, turning one long video into several targeted content pieces.
2.  **Systematic & "Mathematical" Approach:** The `Core_Methodology` and `Chain_of_Thought` requirement forces the AI to perform a structured analysis (Identify Scenes -> Count Scenes -> Select Keyframes -> Count Keyframes) before generating content. This logical progression is far more reliable.
3.  **Improved Accuracy for Gemini:** By breaking the complex task into smaller, defined steps (Segment, then Extract, then Write), you reduce the cognitive load on the AI. The `Chain_of_Thought` acts as a self-correction mechanism, significantly improving the coherence and accuracy of the final output.
4.  **Single, Detailed Caption Format:** Your request is perfectly implemented in the `Detailed_Caption` rule, which requires a unified narrative that explicitly references the images. This is more engaging and efficient.
5.  **Standard & Proven:** This prompt structure utilizes best practices in prompt engineering:
    *   **Role-Playing/Persona:** It implicitly asks the AI to act as a content strategist.
    *   **Chain of Thought (CoT):** Explicitly required for better reasoning.
    *   **Zero-Shot Learning with Examples:** The examples in the rules (e.g., "The Trap & Initial Problem") help the AI understand the concepts.
    *   **Structured Output:** The `[TAGS]` make the output highly reliable and easy for another program to parse.